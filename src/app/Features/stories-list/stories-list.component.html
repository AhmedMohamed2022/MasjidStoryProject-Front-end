<div class="stories-list-section">
    <!-- Section Header -->
    <div class="section-header">
        <h1 class="section-title">
            <i class="fas fa-book-open section-icon"></i>
            All Stories
        </h1>
        <p class="section-subtitle">Discover amazing stories from masjids around the world</p>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-container">
        <div class="islamic-spinner">
            <div class="spinner-circle"></div>
        </div>
        <p class="loading-text">Loading stories...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="error-container">
        <div class="error-card">
            <i class="fas fa-exclamation-triangle error-icon"></i>
            <h4>Unable to Load Stories</h4>
            <p>{{ error }}</p>
            <button class="btn btn-primary" (click)="refreshStories()">
                <i class="fas fa-refresh"></i> Try Again
            </button>
        </div>
    </div>

    <!-- No Stories State -->
    <div *ngIf="!loading && !error && stories.length === 0" class="no-stories-container">
        <div class="no-stories-card">
            <i class="fas fa-book-open no-stories-icon"></i>
            <h4>No Stories Available</h4>
            <p>There are currently no stories available. Check back later for new stories.</p>
        </div>
    </div>

    <!-- Stories Grid -->
    <div *ngIf="!loading && !error && stories.length > 0" class="stories-grid">
        <div *ngFor="let story of stories; trackBy: trackByStoryId" class="story-card"
            (click)="navigateToStory(story.id)">

            <!-- Story Content -->
            <div class="story-content">
                <!-- Story Header -->
                <div class="story-header">
                    <h3 class="story-title">{{ story.title }}</h3>
                    <div class="story-meta">
                        <span class="story-masjid">
                            <i class="fas fa-mosque"></i>
                            {{ story.masjidName }}
                        </span>
                        <span class="story-date">
                            <i class="fas fa-calendar"></i>
                            {{ formatDate(story.datePublished) }}
                        </span>
                    </div>
                </div>

                <!-- Story Description -->
                <div class="story-description">
                    <p>{{ getStoryExcerpt(story.content) }}</p>
                </div>

                <!-- Story Stats -->
                <div class="story-stats">
                    <span class="story-likes" *ngIf="story.likeCount !== undefined">
                        <i class="fas fa-heart"></i>
                        {{ story.likeCount }}
                    </span>
                    <span class="story-comments" *ngIf="story.comments && story.comments.length > 0">
                        <i class="fas fa-comment"></i>
                        {{ story.comments.length }}
                    </span>
                </div>

                <!-- Story Author -->
                <div class="story-author">
                    <span class="author-name">
                        <i class="fas fa-user"></i>
                        {{ story.authorFullName }}
                    </span>
                </div>

                <!-- Read More Button -->
                <div class="story-actions">
                    <button class="btn btn-read-more">
                        <i class="fas fa-arrow-right"></i>
                        Read More
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Back to Home -->
    <div *ngIf="!loading && !error" class="back-section">
        <div class="section-divider">
            <div class="divider-line"></div>
            <div class="divider-content">
                <i class="fas fa-home divider-icon"></i>
            </div>
            <div class="divider-line"></div>
        </div>

        <div class="back-content">
            <button class="btn btn-outline" routerLink="/">
                <i class="fas fa-arrow-left"></i>
                Back to Home
            </button>
        </div>
    </div>
</div>